<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Analysis Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 10px 10px 0;
            transition: all 0.2s ease;
        }
        .test-button:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }
        .test-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 500;
        }
        .status.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .status.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .status.info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }
        .dashboard-link {
            display: inline-block;
            background: #10b981;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.2s ease;
        }
        .dashboard-link:hover {
            background: #059669;
            transform: translateY(-1px);
        }
        .instructions {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .instructions h3 {
            margin-top: 0;
            color: #0369a1;
        }
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        .instructions li {
            margin: 8px 0;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üé• Video Analysis Test</h1>
        <p>This page helps you test the video analysis functionality in your dashboard.</p>
        
        <div class="instructions">
            <h3>üìã How to Test:</h3>
            <ol>
                <li>Make sure your dashboard server is running on <code>http://localhost:3000</code></li>
                <li>Click the "Send Test Video Analysis" button below</li>
                <li>Open your dashboard to see the video analysis display</li>
                <li>The video analysis should appear below the ad text analysis</li>
            </ol>
        </div>

        <button class="test-button" onclick="runTest()" id="testBtn">
            üß™ Send Test Video Analysis
        </button>
        
        <button class="test-button" onclick="clearData()" id="clearBtn">
            üóëÔ∏è Clear All Data
        </button>

        <div id="status"></div>
        
        <a href="http://localhost:3000" target="_blank" class="dashboard-link">
            üöÄ Open Dashboard
        </a>
    </div>

    <script>
        let isTestRunning = false;

        async function runTest() {
            if (isTestRunning) return;
            
            isTestRunning = true;
            const testBtn = document.getElementById('testBtn');
            const statusDiv = document.getElementById('status');
            
            testBtn.disabled = true;
            testBtn.textContent = '‚è≥ Sending...';
            statusDiv.innerHTML = '<div class="status info">üîÑ Sending test video analysis data...</div>';

            try {
                // Sample video analysis data
                const sampleData = [
                    {
                        "id": "resp_test_video_analysis",
                        "object": "response",
                        "created_at": Date.now(),
                        "status": "completed",
                        "model": "gpt-5-mini-2025-08-07",
                        "output": [
                            {
                                "id": "msg_test_video",
                                "type": "message",
                                "status": "completed",
                                "content": [
                                    {
                                        "type": "output_text",
                                        "text": "–†–ï–ö–õ–ê–ú–û–î–ê–¢–ï–õ–¨: Komis Auto –í—ñ–Ω–Ω–∏—Ü—è\nID –í–ò–î–ï–û: video_12345\n–î–ê–¢–ê –ó–ê–ü–£–°–ö–ê: Jun 10, 2025\n\n1. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫\n‚Ä¢ –§–æ—Ä–º–∞—Ç: –≤–µ—Ä—Ç–∏–∫–∞–ª—å (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ TikTok/Reels), –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚âà30 —Å.\n‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ: —Ä–µ–∑–∫–æ—Å—Ç—å –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∫–∞–¥—Ä–æ–≤ —á—ë—Ç–∫–∞—è; –∫–æ–Ω—Ç—Ä–∞—Å—Ç —Å—Ä–µ–¥–Ω–∏–π.\n‚Ä¢ –°—É–±—Ç–∏—Ç—Ä—ã: –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –Ω–µ—Ç; –µ—Å—Ç—å –∫—Ä—É–ø–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ–≤–µ—Ä–ª–µ–∏.\n\n2. –í–∏–∑—É–∞–ª –∏ –º–æ–Ω—Ç–∞–∂\n‚Ä¢ –ü–µ—Ä–≤—ã–µ 3‚Äì5 —Å–µ–∫—É–Ω–¥: –∫—Ä—É–ø–Ω—ã–π –ø–ª–∞–Ω –ø–µ—Ä–µ–¥–Ω–µ–π —á–∞—Å—Ç–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è + –¥–µ–≤—É—à–∫–∞‚Äë–ø—Ä–µ–∑–µ–Ω—Ç–µ—Ä.\n‚Ä¢ –¢–µ–º–ø: —Å–ø–æ–∫–æ–π–Ω—ã–π, —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–∞–¥—Ä—ã, –º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞ —Ä–∞–∫—É—Ä—Å–æ–≤.\n‚Ä¢ –û–±—â–∏–π —Å—Ç–∏–ª—å: –ø–æ–ª—É–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ UGC.\n\n3. –ö—Ç–æ –≤ –∫–∞–¥—Ä–µ\n‚Ä¢ –õ—é–¥–∏: –∂–µ–Ω—â–∏–Ω–∞ ~20‚Äì22 –≥–æ–¥–∞, –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è/–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–∞—è.\n‚Ä¢ –ö–∞–∫ –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–æ–¥—É–∫—Ç: –∞–≤—Ç–æ–º–æ–±–∏–ª—å ‚Äî –≥–µ—Ä–æ–π —Ä–æ–ª–∏–∫–∞ (45‚Äì60% –∫–∞–¥—Ä–∞).\n‚Ä¢ –í–∏–¥–∏–º–æ—Å—Ç—å –ª–æ–≥–æ—Ç–∏–ø–∞: ¬´komisauto¬ª –Ω–∞ –Ω–æ–º–µ—Ä–Ω–æ–º –∑–Ω–∞–∫–µ, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏.\n\n4. –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥\n‚Ä¢ –¢–∏–ø –æ—Ñ—Ñ–µ—Ä–∞: –ø—Ä–æ–¥–∞–∂–∞ –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ —á–µ—Ä–µ–∑ –∫–æ–º–∏—Å—Å–∏–æ–Ω–Ω—ã–π –∞–≤—Ç–æ—Å–∞–ª–æ–Ω.\n‚Ä¢ –°—Ç–∞–¥–∏—è –≤–æ—Ä–æ–Ω–∫–∏: mid ‚Üí bottom (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∏ —Å—Ç–∏–º—É–ª –∫ –Ω–∞–º–µ—Ä–µ–Ω–∏—é).\n\n5. –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è\n‚Ä¢ –î—Ä–∞–π–≤–µ—Ä—ã: –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å/–∂–µ–ª–∞–Ω–∏–µ (–≤–æ–ø—Ä–æ—Å—ã), –¥–æ–≤–µ—Ä–∏–µ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—É—é –ª–æ–∫–∞—Ü–∏—é.\n‚Ä¢ –ü—Ä–∏—ë–º—ã: –≤–æ–ø—Ä–æ—Å–Ω—ã–π —Ö—É–∫ –¥–ª—è –≤–æ–≤–ª–µ—á–µ–Ω–∏—è, –±—Ä–µ–Ω–¥–∏–Ω–≥ –∫–∞–∫ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç.\n\n6. –ü—Ä–æ–¥–∞–∂–∏\n‚Ä¢ CTA: —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –æ–≤–µ—Ä–ª–µ–∏ –∏ –ø—Ä–∏–∑—ã–≤ –∫ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.\n‚Ä¢ –¶–µ–Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã: –µ—Å—Ç—å —è–≤–Ω—ã–π –∫–∞–¥—Ä —Å ¬´5 000 –≥—Ä–Ω/–º—ñ—Å¬ª.\n\n7. –ú–µ—Ç—Ä–∏–∫–∏/–ø—Ä–æ–≥–Ω–æ–∑\n‚Ä¢ Rotation insight: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–µ—Ä–≤—ã–µ 7 –¥–Ω–µ–π.\n‚Ä¢ Novelty (0‚Äì100): 30 (—Ç–∏–ø–æ–≤–æ–π –¥–∏–ª–µ—Ä—Å–∫–∏–π –∫—Ä–µ–∞—Ç–∏–≤).\n\n8. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏\n‚Ä¢ 3 quick wins: —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç –æ–≤–µ—Ä–ª–µ–µ–≤, –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–π CTA, –ø–æ–¥—Ä–µ–∑–∞—Ç—å –∫–∞–¥—Ä—ã.\n‚Ä¢ 2 —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç–∞: A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤ –∏ –≥–∞—Ä–∞–Ω—Ç–∏–π.\n‚Ä¢ 1 —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∞—è: —Å–µ—Ä–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö UGC-—Ä–æ–ª–∏–∫–æ–≤ —Å –æ—Ç–∑—ã–≤–∞–º–∏.\n\n9. –ò—Ç–æ–≥\n‚Ä¢ –ß—Ç–æ —Ä–µ–∫–ª–∞–º–∏—Ä—É–µ—Ç—Å—è: Komis Auto –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ —Å —Ä–∞—Å—Å—Ä–æ—á–∫–æ–π.\n‚Ä¢ –ö–∞—á–µ—Å—Ç–≤–æ –∫—Ä–µ–∞—Ç–∏–≤–∞: –ø–æ–ª—É–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ, —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å–Ω—è—Ç–æ–µ, –Ω–æ —à–∞–±–ª–æ–Ω–Ω–æ–µ.\n‚Ä¢ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: —Ä–µ–∞–ª—å–Ω–∞—è –ª–æ–∫–∞—Ü–∏—è, —á–∏—Ç–∞–µ–º—ã–π –±—Ä–µ–Ω–¥–∏–Ω–≥, –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è –≤–µ–¥—É—â–∞—è.\n‚Ä¢ –°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã: –Ω–∏–∑–∫–∞—è –¥–∏–Ω–∞–º–∏–∫–∞, —Å–ª–∞–±—ã–π CTA, —á–∞—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤ –Ω–µ—á–∏—Ç–∞–µ–º–∞."
                                    }
                                ],
                                "role": "assistant"
                            }
                        ]
                    }
                ];

                const response = await fetch('/api/data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-request-id': `test_video_${Date.now()}`
                    },
                    body: JSON.stringify(sampleData)
                });

                if (response.ok) {
                    const result = await response.json();
                    statusDiv.innerHTML = `
                        <div class="status success">
                            ‚úÖ Test video analysis data sent successfully!<br>
                            <small>Data type: ${result.dataType || 'video_analysis'}</small>
                        </div>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status error">
                        ‚ùå Failed to send test data: ${error.message}
                    </div>
                `;
            } finally {
                testBtn.disabled = false;
                testBtn.textContent = 'üß™ Send Test Video Analysis';
                isTestRunning = false;
            }
        }

        async function clearData() {
            const clearBtn = document.getElementById('clearBtn');
            const statusDiv = document.getElementById('status');
            
            clearBtn.disabled = true;
            clearBtn.textContent = '‚è≥ Clearing...';
            statusDiv.innerHTML = '<div class="status info">üîÑ Clearing all data...</div>';

            try {
                const response = await fetch('/api/data', {
                    method: 'DELETE'
                });

                if (response.ok) {
                    statusDiv.innerHTML = `
                        <div class="status success">
                            ‚úÖ All data cleared successfully!
                        </div>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status error">
                        ‚ùå Failed to clear data: ${error.message}
                    </div>
                `;
            } finally {
                clearBtn.disabled = false;
                clearBtn.textContent = 'üóëÔ∏è Clear All Data';
            }
        }

        // Check if dashboard is accessible
        window.addEventListener('load', async () => {
            try {
                const response = await fetch('/api/data');
                if (response.ok) {
                    console.log('‚úÖ Dashboard is accessible');
                } else {
                    console.warn('‚ö†Ô∏è Dashboard returned status:', response.status);
                }
            } catch (error) {
                console.error('‚ùå Dashboard is not accessible:', error.message);
                document.getElementById('status').innerHTML = `
                    <div class="status error">
                        ‚ùå Dashboard is not accessible. Make sure the server is running on port 3000.
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
